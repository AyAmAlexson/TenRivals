{% extends 'default.html' %}
{% load static %}
{% load custom_tags %}
{% load custom_filters %}

        {% block content %}
           <!-- Page Header-->
                    <header class="page-header-ui page-header-ui-light bg-light">
                        <div class="page-header-ui-content pt-6">
                            <div class="container px-5">
                                <div class="row gx-5 align-items-center">
                                    <div class="col-lg-6" data-aos="fade-up">
                                        <h1>All tournaments for {{request.user.username }} </h1>
                                           <h6> {{ tournaments|length }} tournaments in total </h6>
                                               <table style="width:100%" class="table">
                                                   <hr>
                                                   <tr>
                                                   <td>

                                                    </td>
                                                   <td>
                                           {# Добвляем форму, которая объединяет набор полей, которые будут отправляться в запросе #}
                                                <form id="filter-form" method="get" align="right">

                                            {% for field in filterset.form %}
                                                <div style="display: inline-block; margin-right: 10px;">
                                                    {{ field.label_tag }} {{ field }}
                                                </div>
                                            {% endfor %}

                                        </form>

                                        <script>
                                            document.addEventListener('DOMContentLoaded', function() {
                                                var filterForm = document.getElementById('filter-form');
                                                var formFields = filterForm.querySelectorAll('input, select, textarea');

                                                formFields.forEach(function(field) {
                                                    field.addEventListener('change', function() {
                                                        filterForm.action = window.location.href;
                                                        filterForm.submit();
                                                    });
                                                });


                                            });
                                        </script>


                                        </td>
                                        </tr>

                                           </form>
                                                   </table>
                                           <hr>
                                           {% if tournaments %}

                                               <div class="tournaments-grid">
                                                   {% for tournament in tournaments %}
                                                   <div class="tournament-card">
                                                       <div class="tournament-header bg-gradient-primary">
                                                           <span class="tournament-ref">{{ tournament.ref }}</span>
                                                           <span class="tournament-status {{ tournament.status|lower }}">{{ tournament.status|const_replace}}</span>
                                                       </div>
                                                       <div class="tournament-body">
                                                           <div class="tournament-main-info">
                                                               <h3>{{ tournament.type|const_replace}}</h3>
                                                               <p class="tournament-category">{{ tournament.category|const_replace}}</p>
                                                           </div>
                                                           <div class="tournament-details">
                                                               <div class="detail-item">
                                                                   <i class="fas fa-users"></i>
                                                                   <span>{{ tournament.players_enrolled }}/{{ tournament.players_num}}</span>
                                                               </div>
                                                               <div class="detail-item">
                                                                   <i class="fas fa-map-marker-alt"></i>
                                                                   <span>{{ tournament.city|const_replace}}, {{ tournament.geo|const_replace}}</span>
                                                               </div>
                                                               <div class="detail-item">
                                                                   <i class="fas fa-venus-mars"></i>
                                                                   <span>{{ tournament.gender|const_replace}}</span>
                                                               </div>
                                                           </div>
                                                       </div>
                                                   </div>
                                                   {% endfor %}
                                               </div>
                                           {% else %}
                                               <h2>No available tournaments!</h2>
                                           {% endif %}

                                           {# Добавляем пагинацию на страницу #}

                                           {# Информация о предыдущих страницах #}
                                           {% if page_obj.has_previous %}
                                               <a href="?{% url_replace page=1 %}">1</a>
                                               {% if page_obj.previous_page_number != 1 %}
                                                   ...
                                                   <a href="?{% url_replace page=page_obj.previous_page_number %}">{{ page_obj.previous_page_number }}</a>
                                               {% endif %}
                                           {% endif %}

                                           {# Информация о текущей странице #}
                                           {{ page_obj.number }}

                                           {# Информация о следующих страницах #}
                                           {% if page_obj.has_next %}
                                               <a href="?{% url_replace page=page_obj.next_page_number%}">{{ page_obj.next_page_number }}</a>
                                               {% if paginator.num_pages != page_obj.next_page_number %}
                                                   ...
                                                   <a href="?{% url_replace page=page_obj.paginator.num_pages %}">{{ page_obj.paginator.num_pages }}</a>
                                               {% endif %}
                                           {% endif %}
<!--                                        <br>-->
<!--                                               <form action="" align = "left" width="150">-->
<!--                                                   <input type="button"  value="Add Residential Property" onclick="window.location.href='residential/create/';"/>-->
<!--                                                   <input type="button"  value="Add Property for Sale" onclick="window.location.href='sales/create/';"/>-->
<!--                                                   <input type="button"  value="Add Commercial Property" onclick="window.location.href='commercial/create/';"/>-->
<!--                                               </form>-->
<!--                                        -->
<!--                                        <br>-->
                                        <br>
                                        <a href="/accounts/logout/"> Sign Out </a>
                                    </div>
                                    
                                </div>
                            </div>
                        </div>
                        <div class="svg-border-rounded text-white">
                            <!-- Rounded SVG Border-->
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 144.54 17.34" preserveAspectRatio="none" fill="currentColor"><path d="M144.54,17.34H0V0H144.54ZM0,0S32.36,17.34,72.27,17.34,144.54,0,144.54,0"></path></svg>
                        </div>
                    </header>

        {% endblock content %}


